let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&t.hasOwnProperty("name")&&t.hasOwnProperty("detailsUrl")?e.push(t):alert("Error! Invalid entry")}function n(){return e}function o(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height;let n=[];t.types.forEach(e=>{n.push(e.type.name)}),e.types=n.join(", ");let o=[];t.abilities.forEach(e=>{o.push(e.ability.name)}),e.abilities=o.join(", ")}).catch(function(e){console.error(e)})}let i=document.querySelector(".search"),r=document.querySelector(".pokemon-list");function a(e){pokemonRepository.addListItem(e)}return i.addEventListener("input",function(){let e=i.value,t=pokemonRepository.pokemonFilter(e);r.innerHTML="",0===t.length?r.innerHTML="<p>No pokemon match your search</p>":t.forEach(a)}),{add:t,getAll:n,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),i=document.createElement("li");i.classList.add("list-group-item"),i.classList.add("col");let r=document.createElement("button");r.innerHTML=t.name.charAt(0).toUpperCase()+t.name.slice(1)+"<br>",$(r).addClass("btn btn-primary"),$(r).attr("data-toggle","modal"),$(r).attr("data-target","#exampleModal");let a=document.createElement("img");$(a).attr("display","inline-block"),a.src=t.imageUrl,r.appendChild(a),i.appendChild(r),n.appendChild(i),r.addEventListener("click",function(){(function e(t){o(t).then(function(){var e;let n,o,i,r,a,l,p;e=t,n=$(".modal-title"),o=$(".modal-body"),n.empty(),o.empty(),i=$("<h1>"+e.name.charAt(0).toUpperCase()+e.name.slice(1)+"</h1>"),r=$("<p>Height : "+e.height+"</p>"),(a=document.createElement("img")).src=e.imageUrl,l=$(`<p>Types : ${e.types}</p>`),p=$(`<p>abilities : ${e.abilities}</p>`),n.append(i),o.append(r),o.append(a),o.append(l),o.append(p)})})(t)})},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){return Promise.all(e.results.map(e=>{let n={name:e.name,detailsUrl:e.url};return t(n),o(n)}))}).catch(function(e){console.error(e)})},loadDetails:o,pokemonFilter:function t(n){return e.filter(e=>e.name.includes(n.toLowerCase()))}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});