let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&t.hasOwnProperty("name")&&t.hasOwnProperty("detailsUrl")?e.push(t):alert("Error! Invalid entry")}function n(){return e}function o(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height}).catch(function(e){console.error(e)})}let r=document.querySelector(".search"),i=document.querySelector(".pokemon-list");function a(e){pokemonRepository.addListItem(e)}return r.addEventListener("input",function(){let e=r.value,t=pokemonRepository.pokemonFilter(e);i.innerHTML="",0===t.length?i.innerHTML="<p>No pokemon match your search</p>":t.forEach(a)}),{add:t,getAll:n,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),r=document.createElement("li");r.classList.add("list-group-item"),r.classList.add("col");let i=document.createElement("button");i.innerHTML=t.name.charAt(0).toUpperCase()+t.name.slice(1)+"<br>",$(i).addClass("btn btn-primary"),$(i).attr("data-toggle","modal"),$(i).attr("data-target","#exampleModal");let a=document.createElement("img");$(a).attr("display","inline-block"),a.src=t.imageUrl,i.appendChild(a),r.appendChild(i),n.appendChild(r),i.addEventListener("click",function(){(function e(t){o(t).then(function(){var e;let n,o,r,i,a;e=t,n=$(".modal-title"),o=$(".modal-body"),n.empty(),o.empty(),r=$("<h1>"+e.name.charAt(0).toUpperCase()+e.name.slice(1)+"</h1>"),i=$("<p>Height : "+e.height+"</p>"),(a=document.createElement("img")).src=e.imageUrl,n.append(r),o.append(i),o.append(a)})})(t)})},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){return Promise.all(e.results.map(e=>{let n={name:e.name,detailsUrl:e.url};return t(n),o(n)}))}).catch(function(e){console.error(e)})},loadDetails:o,pokemonFilter:function t(n){return e.filter(e=>e.name.includes(n.toLowerCase()))}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});