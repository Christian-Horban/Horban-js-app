const pokemonRepository=function(){let e=[],t=document.getElementById("loading-message");function n(){t.style.display="block"}function i(){t.style.display="none"}function o(t){"object"==typeof t&&"name"in t?e.push(t):console.log("pokemon is not correct")}function a(){return e}function r(e){n();let t=e.detailsUrl;return fetch(t).then(e=>e.json()).then(t=>{e.imageUrlFront=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.height=t.height,e.weight=t.weight;let n=[];t.types.forEach(e=>{n.push(e.type.name)}),e.types=n.join(", ");let o=[];t.abilities.forEach(e=>{o.push(e.ability.name)}),e.abilities=o.join(", "),i()}).catch(e=>{i(),console.error(e)})}function l(e){r(e).then(()=>{let t=$(".modal-body"),n=$(".modal-title");n.empty(),t.empty();let i=$(`<h1>${e.name.charAt(0).toUpperCase()}${e.name.slice(1)}</h1>`),o=$('<img class="modal-img" style="width: 50%">');o.attr("src",e.imageUrlFront);let a=$('<img class="modal-img" style="width:50%>');a.attr("src",e.imageUrlBack);let r=$(`<p>Height : ${e.height}</p>`),l=$(`<p>Weight : ${e.weight}</p>`),s=$(`<p>Types : ${e.types}</p>`),p=$(`<p>abilities : ${e.abilities}</p>`);n.append(i),t.append(o),t.append(a),t.append(r),t.append(l),t.append(s),t.append(p)})}return{getAll:a,add:o,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),i=document.createElement("li");i.classList.add("col");let o=document.createElement("button");o.innerText=t.name.charAt(0).toUpperCase()+t.name.slice(1),o.classList.add("button-class"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#exampleModal");let a=document.createElement("img");a.src=t.imageUrlFront,o.appendChild(a),i.appendChild(o),n.appendChild(i),o.addEventListener("click",()=>{l(t)})},loadList:function e(){return n(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=${apiLimit}").then(e=>e.json()).then(e=>{let t=e.results.map(e=>{let t={name:e.name,detailsUrl:e.url};return o(t),r(t)});return Promise.all(t)}).then(()=>{setTimeout(()=>{i()},1e3)}).catch(e=>{i(),console.error(e)})},loadDetails:r,showDetails:l,filterPokemons:function t(n){return e.filter(e=>{let t=e.name.toLowerCase(),i=n.toLowerCase();return t.startsWith(i)})}}}(),inputField=document.querySelector('input[type="search"]');function removeList(){let e=document.querySelector(".pokemon-list");e.innerHTML=""}function showErrorMessage(e){let t=document.querySelector(".pokemon-list");t.innerHTML=`<li>${e}</li>`}function addListPokemon(e){pokemonRepository.addListItem(e)}inputField.addEventListener("input",()=>{let e=inputField.value,t=pokemonRepository.filterPokemons(e);removeList(),0===t.length?showErrorMessage("Sorry. There are no Pok\xe9mon matching your search."):t.forEach(addListPokemon)}),pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(addListPokemon)});